{"version":3,"sources":["directives.js","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/7"],"names":[],"mappings":"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","file":"/Users/tbosch/projects/angular2/modules/angular2/src/forms/directives.js","sourceRoot":"/Users/tbosch/projects/angular2/modules/angular2/src/forms/","sourcesContent":["import {Template, Component, Decorator, NgElement, Ancestor, onChange} from 'angular2/core';\nimport {DOM} from 'angular2/src/facade/dom';\nimport {isBlank, isPresent, CONST} from 'angular2/src/facade/lang';\nimport {StringMapWrapper, ListWrapper} from 'angular2/src/facade/collection';\nimport {ControlGroup, Control} from './model';\n\nclass ControlGroupDirectiveBase {\n  addDirective(directive):void {}\n  findControl(name:string):Control { return null; }\n}\n\n@CONST()\nexport class ControlValueAccessor {\n  readValue(el){}\n  writeValue(el, value):void {}\n}\n\n@CONST()\nclass DefaultControlValueAccessor extends ControlValueAccessor {\n  constructor() {\n    super();\n  }\n\n  readValue(el) {\n    return el.value;\n  }\n\n  writeValue(el, value):void {\n    el.value = value;\n  }\n}\n\n@CONST()\nclass CheckboxControlValueAccessor extends ControlValueAccessor {\n  constructor() {\n    super();\n  }\n\n  readValue(el):boolean {\n    return el.checked;\n  }\n\n  writeValue(el, value:boolean):void {\n    el.checked = value;\n  }\n}\n\nvar controlValueAccessors = {\n  \"checkbox\" : new CheckboxControlValueAccessor(),\n  \"text\" : new DefaultControlValueAccessor()\n};\n\nfunction controlValueAccessorFor(controlType:string):ControlValueAccessor {\n  var accessor = StringMapWrapper.get(controlValueAccessors, controlType);\n  if (isPresent(accessor)) {\n    return accessor;\n  } else {\n    return StringMapWrapper.get(controlValueAccessors, \"text\");\n  }\n}\n\n\nexport class ControlDirectiveBase {\n  _groupDecorator:ControlGroupDirectiveBase;\n  _el:NgElement;\n\n  controlName:string;\n  type:string;\n  valueAccessor:ControlValueAccessor;\n\n  constructor(groupDecorator, el:NgElement)  {\n    this._groupDecorator = groupDecorator;\n    this._el = el;\n  }\n\n  _initialize() {\n    if (isBlank(this.valueAccessor)) {\n      this.valueAccessor = controlValueAccessorFor(this.type);\n    }\n    this._groupDecorator.addDirective(this);\n    this._updateDomValue();\n    DOM.on(this._el.domElement, \"change\", (_) => this._updateControlValue());\n  }\n\n  _updateDomValue() {\n    this.valueAccessor.writeValue(this._el.domElement, this._control().value);\n  }\n\n  _updateControlValue() {\n    this._control().value = this.valueAccessor.readValue(this._el.domElement);\n  }\n\n  _control() {\n    return this._groupDecorator.findControl(this.controlName);\n  }\n}\n\n@Decorator({\n  lifecycle: [onChange],\n  selector: '[control-name]',\n  bind: {\n    'controlName' : 'control-name',\n    'type' : 'type'\n  }\n})\nexport class ControlNameDirective extends ControlDirectiveBase {\n  constructor(@Ancestor() groupDecorator:ControlGroupDirective, el:NgElement) {\n    super(groupDecorator, el);\n  }\n\n  onChange(_) {\n    this._initialize();\n  }\n}\n\n@Decorator({\n  lifecycle: [onChange],\n  selector: '[control]',\n  bind: {\n    'controlName' : 'control',\n    'type' : 'type'\n  }\n})\nexport class ControlDirective extends ControlDirectiveBase {\n  constructor(@Ancestor() groupDecorator:NewControlGroupDirective, el:NgElement) {\n    super(groupDecorator, el);\n  }\n\n  onChange(_) {\n    this._initialize();\n  }\n}\n\n@Decorator({\n  selector: '[control-group]',\n  bind: {\n    'controlGroup' : 'control-group'\n  }\n})\nexport class ControlGroupDirective extends ControlGroupDirectiveBase {\n  _controlGroup:ControlGroup;\n  _directives:List<ControlNameDirective>;\n\n  constructor() {\n    super();\n    this._directives = ListWrapper.create();\n  }\n\n  set controlGroup(controlGroup:ControlGroup) {\n    this._controlGroup = controlGroup;\n    ListWrapper.forEach(this._directives, (cd) => cd._updateDomValue());\n  }\n\n  addDirective(c:ControlNameDirective) {\n    ListWrapper.push(this._directives, c);\n  }\n\n  findControl(name:string):Control {\n    return this._controlGroup.controls[name];\n  }\n}\n\n@Component({\n  selector: '[new-control-group]',\n  bind: {\n    'initData' : 'new-control-group'\n  }\n})\n@Template({inline: '<content>'})\nexport class NewControlGroupDirective extends ControlGroupDirectiveBase {\n  _initData:any;\n  _controlGroup:ControlGroup;\n  _directives:List<ControlNameDirective>;\n\n  constructor() {\n    super();\n    this._directives = ListWrapper.create();\n  }\n\n  set initData(value) {\n    this._initData = value;\n  }\n\n  addDirective(c:ControlDirective) {\n    ListWrapper.push(this._directives, c);\n    this._controlGroup = null;\n  }\n\n  findControl(name:string):Control {\n    if (isBlank(this._controlGroup)) {\n      this._controlGroup = this._createControlGroup();\n    }\n    return this._controlGroup.controls[name];\n  }\n\n  _createControlGroup():ControlGroup {\n    var controls = ListWrapper.reduce(this._directives, (memo, cd) => {\n      var initControlValue = this._initData[cd.controlName];\n      memo[cd.controlName] = new Control(initControlValue);\n      return memo;\n    }, {});\n    return new ControlGroup(controls);\n  }\n\n  get value() {\n    return this._controlGroup.value;\n  }\n}\n\nexport var FormDirectives = [\n  ControlGroupDirective, ControlNameDirective,\n  ControlDirective, NewControlGroupDirective\n];\n","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});","assert.type.$__placeholder__0)","Object.getOwnPropertyDescriptor($__placeholder__0)"]}